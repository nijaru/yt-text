# yt-text Environment Configuration
# Copy this file to .env and update with your settings

# ========================================
# API Server Configuration
# ========================================
APP_HOST=0.0.0.0
APP_PORT=8000
APP_WORKERS=1
APP_ENV=development  # production, development, testing
APP_DEBUG=false
APP_DOCS_ENABLED=true

# ========================================
# Database Configuration
# ========================================
APP_DATABASE_URL=sqlite+aiosqlite:///data/db.sqlite
APP_DATABASE_POOL_SIZE=5
APP_DATABASE_POOL_TIMEOUT=30

# ========================================
# Paths Configuration
# ========================================
APP_DATA_DIR=data
APP_TEMP_DIR=/tmp/yt-text
APP_MODEL_DIR=models
APP_STATIC_DIR=static
APP_CACHE_DIR=cache
APP_LOG_FILE=logs/app.log

# ========================================
# Transcription Configuration
# ========================================
# Available models: tiny, base, small, medium, large
APP_WHISPER_MODEL=base
APP_WHISPER_LANGUAGE=auto
APP_WHISPER_DEVICE=auto  # auto, cpu, cuda, mps

# Transcription backends in priority order
# Options: whisper_cpp, mlx, openai, fallback_whisper
APP_TRANSCRIPTION_BACKENDS=["whisper_cpp", "mlx", "openai"]

# ========================================
# OpenAI API Configuration (Optional)
# ========================================
# Required only if using OpenAI backend
APP_OPENAI_API_KEY=
APP_OPENAI_DAILY_LIMIT=100
APP_OPENAI_MODEL=whisper-1

# ========================================
# Performance Configuration
# ========================================
APP_RATE_LIMIT_ENABLED=true
APP_RATE_LIMIT_RPM=10  # Requests per minute
APP_RATE_LIMIT_DAILY=1000  # Daily request limit
APP_REQUEST_TIMEOUT=30  # Seconds
APP_DOWNLOAD_TIMEOUT=300  # Seconds
APP_TRANSCRIPTION_TIMEOUT=1800  # Seconds (30 minutes)
APP_CLEANUP_INTERVAL=3600  # Seconds (1 hour)
APP_MAX_VIDEO_DURATION=14400  # Seconds (4 hours)
APP_MAX_FILE_SIZE=2147483648  # Bytes (2GB)
APP_MAX_CONCURRENT_JOBS=3

# ========================================
# Cache Configuration
# ========================================
APP_CACHE_ENABLED=true
APP_CACHE_SIZE_LIMIT=1073741824  # Bytes (1GB)
APP_CACHE_TTL=604800  # Seconds (1 week)

# ========================================
# Security Configuration
# ========================================
APP_CORS_ORIGINS=["*"]
APP_CORS_CREDENTIALS=true
APP_SECURITY_HEADERS=true
APP_TRUSTED_HOSTS=["*"]

# URL filtering (comma-separated domains)
# Leave empty to allow all
APP_URL_ALLOWLIST=
APP_URL_BLOCKLIST=

# ========================================
# Logging Configuration
# ========================================
APP_LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
APP_LOG_FORMAT=console  # json, console
APP_LOG_MAX_SIZE=10485760  # Bytes (10MB)
APP_LOG_BACKUP_COUNT=5